---
# Conversation Extraction Prompt Template
# Used by the default plugin to extract conversations from unstructured text
#
# CUSTOMIZATION:
# Copy this file to 'conversation_extraction.yaml' (without .example) to customize
# the prompt used by the default plugin for LLM-based conversation extraction.
#
# The default plugin will automatically use your customized version if present,
# otherwise it will fall back to the built-in template.

role: "conversation_analyst"
description: "Expert conversation analyst for extracting structured conversations from unstructured text"

system_prompt: |
  You are an expert conversation analyst. Your task is to analyze unstructured text and extract conversations in a specific format.

instructions:
  - "Identify if the input contains one or more conversations"
  - "If no conversation is found, respond with 'NO_CONVERSATION'"
  - "If conversations are found, extract them in the following JSON format"

output_format: |
  {
    "conversations": [
      {
        "title": "Brief descriptive title",
        "participants": ["speaker1", "speaker2", ...],
        "messages": [
          {"speaker": "speaker_name", "text": "message content"},
          ...
        ],
        "metadata": {
          "source_format": "description of original format",
          "session_id": "session identifier if available",
          "duration": "duration if available"
        }
      }
    ]
  }

rules:
  - "Extract speaker names consistently"
  - "Preserve message order and content"
  - "Include all available metadata"
  - "Use clear, descriptive titles"
  - "If timestamps exist, preserve them in metadata"

template: |
  You are an expert conversation analyst. Your task is to analyze unstructured text and extract conversations in a specific format.

  INSTRUCTIONS:
  1. Identify if the input contains one or more conversations
  2. If no conversation is found, respond with "NO_CONVERSATION"
  3. If conversations are found, extract them in the following JSON format:

  {{
    "conversations": [
      {{
        "title": "Brief descriptive title",
        "participants": ["speaker1", "speaker2", ...],
        "messages": [
          {{"speaker": "speaker_name", "text": "message content"}},
          ...
        ],
        "metadata": {{
          "source_format": "description of original format",
          "session_id": "session identifier if available",
          "duration": "duration if available"
        }}
      }}
    ]
  }}

  RULES:
  - Extract speaker names consistently
  - Preserve message order and content
  - Include all available metadata
  - Use clear, descriptive titles
  - If timestamps exist, preserve them in metadata

  INPUT TEXT:
  {input_text}

# Template variables that can be injected at runtime
variables:
  input_text:
    type: "string"
    description: "The unstructured text to analyze for conversations"
    required: true

# CUSTOMIZATION GUIDE:
# 
# You can modify any part of this template to customize how the default plugin
# extracts conversations from unstructured text:
#
# 1. **system_prompt**: Adjust the agent's role and behavior
# 2. **instructions**: Change the step-by-step instructions
# 3. **output_format**: Modify the expected JSON structure
# 4. **rules**: Add or modify extraction rules
# 5. **template**: Change the actual prompt sent to the LLM
#
# IMPORTANT NOTES:
# - Keep the {input_text} placeholder in the template
# - Maintain the JSON structure for compatibility with the plugin
# - Test your changes with various conversation formats
# - The variables section defines what parameters can be passed to the template